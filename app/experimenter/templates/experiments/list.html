{% extends "base.html" %}

{% load static %}

{% block header_content %}
  <h3>
    {{ experiments.count }}

    {% if filter.form.type.value %}
      {{ filter.form.get_type_display_value }}
    {% endif %}

    {% if filter.form.status.value %}
      {{ filter.form.status.value }}
    {% endif %}

    {% if filter.form.firefox_channel.value %}
      {{ filter.form.firefox_channel.value }}
    {% endif %}

    {% if filter.form.firefox_version.value %}
      Firefox
      {{ filter.form.firefox_version.value }}
    {% endif %}

    {% if filter.form.project.value %}
      {{ filter.form.get_project_display_value }}
    {% endif %}

    Experiment{{ experiments|pluralize:"s" }}

    {% if filter.form.owner.value %}
      by {{ filter.form.get_owner_display_value }}
    {% endif %}
  </h3>
{% endblock %}

{% block header_sidebar %}
  <div class="row">
    <div class="col-md-12">
      <a class="col-md-12 btn btn-info" href="{% url "experiments-create" %}">
        <span class="glyphicon glyphicon-edit"></span>
        Create Experiment
      </a>
    </div>
  </div>
{% endblock %}

{% block main_content %}
  {% for experiment in experiments %}
    <a class="noanchorstyle clickhighlight" href="{% url "experiments-detail" slug=experiment.slug %}">
      <div class="row">
        <div class="col-md-12">
          <h4 class="md-mt-0">
            {{ experiment }}
            <span class="badge status-color-{{ experiment.status }}">{{ experiment.get_status_display }}</span>
          </h4>
        </div>
      </div>

      <div class="row card">
        <div class="col-md-8">
          <h5>
            Owner: {{ experiment.owner }}
          </h5>
          {{ experiment.short_description|linebreaks }}
        </div>

        <div class="col-md-4 text-right">
          <h4>{{ experiment.population }}</h4>
          <p><strong>{{ experiment.dates }}</strong></p>
        </div>
      </div>
    </a>
  {% endfor %}
{% endblock %}

{% block main_sidebar %}
  <form method="GET">
    <div class="row md-mb-10">
      <strong class="col-md-12">Sort Experiments</strong>
    </div>

    <div class="row md-mb-10">
      <div class="col-md-12">
        {{ ordering_form.ordering }}
      </div>
    </div>

    <div class="row md-mt-20 md-mb-10">
      <strong class="col-md-12">Filter Experiments</strong>
    </div>

    {% for field in filter.form %}
      <div class="row md-mb-10">
        <div class="col-md-12">
          {% ifequal field.name "archived" %}
            <div class="checkbox md-m-0">
              <label>
                {{ field }}
                {{ field.label }}
              </label>
            </div>
          {% else %}
            {{ field }}
          {% endifequal %}
        </div>
      </div>
    {% endfor %}

    <div class="row">
      <div class="col-md-12 text-right">
        <button type="submit" class="btn btn-info">
          <span class="glyphicon glyphicon-ok"></span> Apply
        </button>
      </div>
    </div>
  </form>
{% endblock %}
