<th scope="col" class="fw-bold">
  <form method="get"
        hx-get="{{ url }}"
        hx-trigger="submit"
        hx-target="{{ hx_target }}"
        hx-select="{{ hx_select }}"
        class="d-inline-block m-0">
    {# Preserve all current filters except "sort" #}
    {% for field in form %}
      {% if field.name != "sort" %}
        {% if field.value %}{{ field.as_hidden }}{% endif %}
      {% endif %}
    {% endfor %}
    {# Set sort value: toggle up/down #}
    {% if current_sort == field %}
      <input type="hidden" name="sort" value="-{{ field }}">
    {% elif current_sort == "-"|add:field %}
      <input type="hidden" name="sort" value="{{ field }}">
    {% else %}
      <input type="hidden" name="sort" value="{{ field }}">
    {% endif %}
    <button type="submit"
            class="btn p-0 text-body fw-semibold text-decoration-none">
      <span class="d-flex align-items-center">
        {{ label }}
        {% if current_sort == field %}
          <i class="ps-1 fa-solid fa-chevron-up"></i>
        {% elif current_sort == "-"|add:field %}
          <i class="ps-1 fa-solid fa-chevron-down"></i>
        {% endif %}
      </span>
    </button>
  </form>
</th>
