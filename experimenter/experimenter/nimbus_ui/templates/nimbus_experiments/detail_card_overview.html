{% extends "nimbus_experiments/detail_card_base.html" %}

{% load nimbus_extras %}

{% block card_id %}overview{% endblock %}
{% block card_anchor %}overview{% endblock %}
{% block card_title %}Overview{% endblock %}
{% block card_body %}
  <table class="table table-striped mb-0">
    <tbody>
      <tr>
        <th>Slug</th>
        <td>{{ experiment.slug }}</td>
        <th>Experiment owner</th>
        <td>{{ experiment.owner }}</td>
      </tr>
      <tr>
        <th>Application</th>
        <td>{{ experiment.get_application_display }}</td>
        <th>Public description</th>
        <td>{{ experiment.public_description|format_not_set }}</td>
      </tr>
      <tr>
        <th>Feature config</th>
        <td>
          {% for feature in experiment.feature_configs.all %}
            <p>{{ feature.name }} - {{ feature.description }}</p>
          {% empty %}
            <span class="text-danger">Not set</span>
          {% endfor %}
        </td>
        <th>Advanced targeting</th>
        <td>{{ experiment.targeting_config.name }} - {{ experiment.targeting_config.description }}</td>
      </tr>
      <tr>
        <th>Hypothesis</th>
        <td colspan="3">{{ experiment.hypothesis }}</td>
      </tr>
      <tr>
        <th>Primary Outcomes</th>
        <td colspan="3">
          {% for outcome, url in primary_outcome_links %}
            <a href="{{ url }}" target="_blank" rel="noopener noreferrer">{{ outcome.title|remove_underscores }}</a>
            {% if not forloop.last %},{% endif %}
          {% empty %}
            <span class="text-danger">Not set</span>
          {% endfor %}
        </td>
      </tr>
      <tr>
        <th>Secondary Outcomes</th>
        <td colspan="3">
          {% for outcome, url in secondary_outcome_links %}
            <a href="{{ url }}" target="_blank" rel="noopener noreferrer">{{ outcome.title|remove_underscores }}</a>
            {% if not forloop.last %},{% endif %}
          {% empty %}
            <span class="text-danger">Not set</span>
          {% endfor %}
        </td>
      </tr>
      <tr>
        <th>Segments</th>
        <td colspan="3">
          {% for segment, url in segment_links %}
            <a href="{{ url }}" target="_blank" rel="noopener noreferrer">{{ segment.title|remove_underscores }}</a>
            {% if not forloop.last %},{% endif %}
          {% empty %}
            <span class="text-danger">Not set</span>
          {% endfor %}
        </td>
      </tr>
      {% include 'nimbus_experiments/subscribers_list.html' %}

    </tbody>
  </table>
{% endblock %}
