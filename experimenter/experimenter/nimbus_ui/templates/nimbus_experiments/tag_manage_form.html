<form hx-post="{% url 'nimbus-ui-manage-tags' experiment.slug %}"
      hx-target="#tags-section"
      hx-swap="innerHTML"
      class="p-2">
  {% csrf_token %}
  <div class="mb-3">
    <label class="form-label fw-semibold">Select Tags to Assign</label>
    {% for choice in form.tags %}
      <div class="form-check d-flex align-items-center justify-content-between mb-2 p-2 rounded border">
        <div class="d-flex align-items-center">
          {{ choice.tag }}
          <div class="d-flex align-items-center ms-2">
            {% for tag in tags %}
              {% if tag.id == choice.data.value %}
                <span class="rounded-circle me-2 border"
                      style="width: 18px;
                             height: 18px;
                             background-color: {{ tag.color }};
                             display: inline-block"></span>
              {% endif %}
            {% endfor %}
            <label class="form-check-label ms-1" for="{{ choice.id_for_label }}">
              <span class="fw-semibold">{{ choice.choice_label }}</span>
            </label>
          </div>
        </div>
        <button type="button"
                class="btn btn-sm btn-outline-primary"
                hx-get="{% url 'nimbus-ui-edit-tag' choice.data.value %}"
                hx-target="#tagModal .modal-body"
                data-bs-toggle="modal"
                data-bs-target="#tagModal">
          <i class="fa-solid fa-edit"></i>
        </button>
      </div>
    {% endfor %}
  </div>
  <div class="d-flex justify-content-end">
    <button type="submit" class="btn btn-primary">Update Tags</button>
  </div>
</form>
